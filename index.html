<!DOCTYPE html>
<html>
<head>
  <title>Multi Email Sender</title>
</head>
<body style="font-family: sans-serif; padding: 40px; background: #f4f4f4;">
  <h1>Multi Email Sender</h1>
  <form id="emailForm">
    <label>From (akun):</label><br>
    <select id="fromAccount" required>
      <option value="gmail1">Gmail #1</option>
      <option value="gmail2">Gmail #2</option>
      <option value="smtp1">SMTP Pribadi (Sedang Off)</option>
    </select><br><br>

    <label>To:</label><br>
    <input type="email" id="to" required /><br><br>

    <label>Subject:</label><br>
    <input type="text" id="subject" required /><br><br>

    <label>Message:</label><br>
    <textarea id="message" rows="6" cols="50" required></textarea><br><br>

    <button type="submit">Kirim Email</button>
  </form>

  <p id="status"></p>

  <script>
    document.getElementById("emailForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      const fromAccount = document.getElementById("fromAccount").value;
      const to = document.getElementById("to").value;
      const subject = document.getElementById("subject").value;
      const message = document.getElementById("message").value;

      const res = await fetch("/api/send", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ fromAccount, to, subject, message })
      });

      const result = await res.json();
      document.getElementById("status").innerText = result.success
        ? "✅ Email berhasil dikirim dari: " + result.sentFrom
        : "❌ Gagal: " + result.error;
    });
  </script>
</body>
</html>
